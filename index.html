<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>API Fun</title>
	<script>
		function getImage() {
			
			var request = new XMLHttpRequest();
			console.log("1 - request object created")
			
			var url = "https://dog.ceo/api/breeds/image/random"
			
			request.open("GET", url, true);
			console.log("2 - opened request file");
			
			request.onreadystatechange = function() 
			{
				console.log("3 - readystatechange event fired.");
	
				if (request.readyState == 4 && request.status == 200) {
					var result = request.responseText;
					alert(result)
					var dogArray = JSON.parse(result);
					
					
					document.getElementById("data").innerHTML ="random dog image: "; 
					
					
					var dogURL = dogArray["message"]
					
					var img = document.createElement('img');
					img.src = dogURL
					document.body.appendChild(img);	
				}
				else if (request.readyState == 4 && request.status != 200) {
					document.getElementById("data").innerHTML = "Something is wrong!  Check the logs to see where this went off the rails";
				}

				else if (request.readyState == 3) {
					document.getElementById("data").innerHTML = "Too soon!  Try again";
				}

			}
			
			request.send();
			console.log("4 - Request sent");
			
			console.log(request.readyState)	
		}
	</script>
</head>


<body onLoad="getImage()">
	<h1>Dog Image</h1>
	<div id="data">Loading...</div>
</body>
</html>
